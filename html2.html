---css
/* Добавьте эти стили в ваш файл admin_styles.css */

.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
    top: 100%; /* Позиционирование дропдауна под полем */
    left: 0;
}

.dropdown-content label {
    display: block;
    padding: 8px 16px;
    cursor: pointer;
}

.dropdown-content label:hover {
    background-color: #f1f1f1;
}
-----------
-------html
<td>
    <div style="position: relative;">
        <input type="text" name="grants" value="${row[8]}" onfocus="showDropdown('${row[0]}')">
        <div id="dropdown-${row[0]}" class="dropdown-content">
            <label><input type="checkbox" value="ADMIN" onchange="updateGrants('${row[0]}')"> ADMIN</label>
            <!-- Динамически добавляем значения из таблицы apps -->
        </div>
    </div>
</td>
----------------
--------js
function showDropdown(id) {
    const dropdown = document.getElementById(`dropdown-${id}`);
    dropdown.style.display = 'block';

    // Очищаем старые значения (кроме ADMIN)
    dropdown.innerHTML = '<label><input type="checkbox" value="ADMIN" onchange="updateGrants(\'' + id + '\')"> ADMIN</label>';

    // Добавляем значения alias
    aliases.forEach(alias => {
        const label = document.createElement('label');
        label.innerHTML = `<input type="checkbox" value="${alias}" onchange="updateGrants('${id}')"> ${alias}`;
        dropdown.appendChild(label);
    });

    // Устанавливаем галочки для уже выбранных значений
    const grantsInput = document.querySelector(`tr[data-id="${id}"] input[name="grants"]`);
    const selectedValues = grantsInput.value.split(';').filter(Boolean); // Убираем пустые строки

    dropdown.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
        if (selectedValues.includes(checkbox.value)) {
            checkbox.checked = true;
        }
    });

    // Позиционируем дропдаун относительно поля ввода
    const inputField = document.querySelector(`tr[data-id="${id}"] input[name="grants"]`);
    const inputRect = inputField.getBoundingClientRect();
    dropdown.style.top = `${inputRect.bottom}px`;
    dropdown.style.left = `${inputRect.left}px`;
}



function hideDropdown(id) {
    setTimeout(() => {
        const dropdown = document.getElementById(`dropdown-${id}`);
        dropdown.style.display = 'none';
    }, 200); // Задержка для возможности выбора значения
}




document.addEventListener('click', function(event) {
    const dropdowns = document.querySelectorAll('.dropdown-content');
    dropdowns.forEach(dropdown => {
        if (!dropdown.contains(event.target) {
            dropdown.style.display = 'none';
        }
    });
});
